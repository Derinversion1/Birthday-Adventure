<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temi's birthday hike</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Press Start 2P', monospace;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 30%, #228B22 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .game-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .background {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 30%, #228B22 100%);
            transition: all 3s ease-in-out;
        }

        .sunset-1 {
            background: linear-gradient(to bottom, #FFB347 0%, #98FB98 40%, #228B22 100%);
        }

        .sunset-2 {
            background: linear-gradient(to bottom, #FF6347 0%, #FFB347 30%, #90EE90 50%, #228B22 100%);
        }

        .sunset-3 {
            background: linear-gradient(to bottom, #DC143C 0%, #FF6347 25%, #FFB347 45%, #8FBC8F 70%, #2F4F2F 100%);
        }

        .sunset-4 {
            background: linear-gradient(to bottom, #800080 0%, #DC143C 20%, #FF6347 40%, #FFB347 55%, #556B2F 80%, #2F4F2F 100%);
        }

        .dusk {
            background: linear-gradient(to bottom, #483D8B 0%, #800080 25%, #2F4F2F 60%, #1C3A1C 100%);
        }

        .night-sky {
            background: linear-gradient(to bottom, #191970 0%, #000080 50%, #1e3a5f 100%);
        }

        .sun {
            position: absolute;
            top: 15%;
            right: 20%;
            width: 60px;
            height: 60px;
            background: #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 20px #FFD700;
            transition: all 3s ease-in-out;
            opacity: 1;
        }

        .sun.setting {
            top: 40%;
            right: 15%;
            background: #FF6347;
            box-shadow: 0 0 30px #FF6347;
        }

        .sun.hidden {
            opacity: 0;
            top: 60%;
        }

        .moon {
            position: absolute;
            top: 10%;
            right: 15%;
            width: 80px;
            height: 80px;
            background: #FFFACD;
            border-radius: 50%;
            box-shadow: 0 0 30px #FFFACD;
            opacity: 0;
            transition: opacity 2s ease-in-out;
        }

        .moon.visible {
            opacity: 1;
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 2s ease-in-out;
        }

        .stars.visible {
            opacity: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        .trail {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: #8B4513;
            background-image: repeating-linear-gradient(
                45deg,
                #A0522D 0px,
                #A0522D 10px,
                #8B4513 10px,
                #8B4513 20px
            );
        }

        .character {
            position: absolute;
            bottom: 20px;
            left: 50px;
            width: 32px;
            height: 40px;
            transition: left 1s ease-in-out;
            image-rendering: pixelated;
            z-index: 10;
        }

        /* Red sweater body */
        .character::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 6px;
            width: 20px;
            height: 20px;
            background: #DC143C;
            border-radius: 2px;
        }

        /* Black cargo pants */
        .character::after {
            content: '';
            position: absolute;
            bottom: 8px;
            left: 8px;
            width: 16px;
            height: 16px;
            background: #2F2F2F;
            border-radius: 1px;
        }

        /* Caramel skin head */
        .character .head {
            position: absolute;
            top: -4px;
            left: 10px;
            width: 12px;
            height: 12px;
            background: #D2B48C;
            border-radius: 1px;
        }

        /* Red beanie */
        .character .beanie {
            position: absolute;
            top: -8px;
            left: 8px;
            width: 16px;
            height: 8px;
            background: #DC143C;
            border-radius: 50% 50% 20% 20%;
        }

        /* Black boots */
        .character .boot-left {
            position: absolute;
            bottom: 0;
            left: 6px;
            width: 8px;
            height: 8px;
            background: #1C1C1C;
            border-radius: 2px;
        }

        .character .boot-right {
            position: absolute;
            bottom: 0;
            right: 6px;
            width: 8px;
            height: 8px;
            background: #1C1C1C;
            border-radius: 2px;
        }

        /* Arms */
        .character .arm-left {
            position: absolute;
            top: 10px;
            left: 2px;
            width: 4px;
            height: 12px;
            background: #DC143C;
            border-radius: 2px;
        }

        .character .arm-right {
            position: absolute;
            top: 10px;
            right: 2px;
            width: 4px;
            height: 12px;
            background: #DC143C;
            border-radius: 2px;
        }

        .trees {
            position: absolute;
            bottom: 60px;
            width: 100%;
            height: 200px; /* Reduced height */
            overflow: hidden;
        }

        .tree {
            position: absolute;
            bottom: 0;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 40px solid #228B22;
            transition: all 1s ease-in-out;
        }

        .tree::before {
            content: '';
            position: absolute;
            bottom: -50px; /* Adjusted position */
            left: -5px;
            width: 10px;
            height: 10px;
            background: #8B4513;
        }

        .tree.large {
            border-left-width: 25px;
            border-right-width: 25px;
            border-bottom-width: 70px;
            border-bottom-color: #1F5F1F;
        }

        .tree.large::before {
            bottom: -85px; /* Adjusted position */
            left: -8px;
            width: 16px;
            height: 15px;
        }

        .tree.medium {
            border-left-width: 20px;
            border-right-width: 20px;
            border-bottom-width: 50px;
            border-bottom-color: #1F7F1F;
        }

        .tree.medium::before {
            bottom: -65px; /* Adjusted position */
            left: -6px;
            width: 12px;
            height: 12px;
        }

        .bushes {
            position: absolute;
            bottom: 20px;
            width: 100%;
            height: 40px;
        }

        .bush {
            position: absolute;
            bottom: 0;
            width: 30px;
            height: 20px;
            background: #32CD32;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .flowers {
            position: absolute;
            bottom: 25px;
            width: 100%;
            height: 20px;
        }

        .flower {
            position: absolute;
            bottom: 0;
            width: 6px;
            height: 6px;
            background: #FF69B4;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .flower::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 2px;
            width: 2px;
            height: 8px;
            background: #32CD32;
        }

        .mushrooms {
            position: absolute;
            bottom: 22px;
            width: 100%;
            height: 15px;
        }

        .mushroom {
            position: absolute;
            bottom: 0;
            width: 12px;
            height: 8px;
            background: #DC143C;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .mushroom::before {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 4px;
            width: 4px;
            height: 6px;
            background: #F5F5DC;
        }

        .mushroom::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            box-shadow: 5px 0 0 -1px white;
        }

        .lake {
            position: absolute;
            bottom: 20px;
            right: 50px;
            width: 200px;
            height: 100px;
            background: #4169E1;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 2s ease-in-out;
            animation: ripple 3s infinite;
            overflow: hidden;
        }

        /* Simplified lake reflection */
        .lake::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        /* Moon reflection */
        .lake-reflection {
            position: absolute;
            top: 20px;
            right: 30px;
            width: 40px;
            height: 40px;
            background: rgba(255, 250, 205, 0.6);
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 15px rgba(255, 250, 205, 0.6);
            transition: opacity 2s ease-in-out;
            animation: ripple-reflection 3s infinite;
        }

        .lake.visible .lake-reflection {
            opacity: 1;
        }

        @keyframes ripple {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes ripple-reflection {
            0%, 100% { 
                transform: scale(1);
                opacity: 0.7;
            }
            50% { 
                transform: scale(1.1);
                opacity: 0.5;
            }
        }

        .ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
        }

        .blurb {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            margin-bottom: 20px;
            font-size: 10px;
            line-height: 1.4;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.5s ease;
        }

        .blurb.show {
            opacity: 1;
            transform: translateY(0);
        }

        .next-button {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 12px 20px;
            font-family: 'Press Start 2P', monospace;
            font-size: 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .next-button:hover {
            background: #FF5252;
            transform: scale(1.05);
        }

        .next-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .birthday-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            font-size: 12px;
            line-height: 2;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            z-index: 1000;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .birthday-card.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .birthday-card h1 {
            font-size: 16px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Sound indicator */
        .sound-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 8px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .sound-indicator.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="background" id="background">
            <div class="sun" id="sun"></div>
            <div class="stars" id="stars"></div>
            <div class="moon" id="moon"></div>
        </div>
        
        <div class="trees" id="trees"></div>
        <div class="bushes" id="bushes"></div>
        <div class="flowers" id="flowers"></div>
        <div class="mushrooms" id="mushrooms"></div>
        <div class="lake" id="lake">
            <div class="lake-reflection"></div>
        </div>
        <div class="trail"></div>
        <div class="character" id="character">
            <div class="head"></div>
            <div class="beanie"></div>
            <div class="arm-left"></div>
            <div class="arm-right"></div>
            <div class="boot-left"></div>
            <div class="boot-right"></div>
        </div>
        
        <div class="ui">
            <div class="blurb" id="blurb"></div>
            <button class="next-button" id="nextButton">Start Your Journey</button>
        </div>
        
        <div class="sound-indicator" id="soundIndicator">🔊 Playing sounds...</div>
        
        <div class="birthday-card" id="birthdayCard">
            <h1>🎂 Happy Birthday! 🎂</h1>
            <p>You've reached the end of this magical journey, just like how you've journeyed into another wonderful year of life!</p>
            <p>May your path ahead be filled with as much beauty and wonder as this moonlit lake.</p>
            <p>With all my love ❤️</p>
        </div>
    </div>

    <script>
        class PixelHike {
            constructor() {
                this.currentStep = 0;
                this.character = document.getElementById('character');
                this.blurb = document.getElementById('blurb');
                this.nextButton = document.getElementById('nextButton');
                this.background = document.getElementById('background');
                this.sun = document.getElementById('sun');
                this.moon = document.getElementById('moon');
                this.stars = document.getElementById('stars');
                this.lake = document.getElementById('lake');
                this.birthdayCard = document.getElementById('birthdayCard');
                this.bushes = document.getElementById('bushes');
                this.flowers = document.getElementById('flowers');
                this.mushrooms = document.getElementById('mushrooms');
                this.soundIndicator = document.getElementById('soundIndicator');
                this.audioContext = null;
                this.audioAllowed = false;
                
                this.steps = [
                    {
                        position: 50,
                        text: "Hello my love, what better way to celebrate your birthday than to take a little hike?",
                        sound: 'tree',
                        skyClass: '',
                        treeCount: 8,
                        bushCount: 0,
                        flowerCount: 0,
                        mushroomCount: 0
                    },
                    {
                        position: 200,
                        text: "You step deeper into the woods. The Iroko trees whisper happy birthday wishes as you pass by their ancient trunks.",
                        sound: 'tree',
                        skyClass: 'sunset-1',
                        treeCount: 12,
                        bushCount: 3,
                        flowerCount: 2,
                        mushroomCount: 0
                    },
                    {
                        position: 350,
                        text: "It's getting late, the sun is setting. Can you hear the crickets starting their birthday serenade?",
                        sound: 'cricket',
                        skyClass: 'sunset-2',
                        treeCount: 15,
                        bushCount: 5,
                        flowerCount: 4,
                        mushroomCount: 1
                    },
                    {
                        position: 500,
                        text: "The frogs are joining in! Can you hear them sing?",
                        sound: 'frog',
                        skyClass: 'sunset-3',
                        treeCount: 18,
                        bushCount: 7,
                        flowerCount: 6,
                        mushroomCount: 3
                    },
                    {
                        position: 650,
                        text: "Deeper in now, It's just you and the wind. It spurs you forward.",
                        sound: 'wind',
                        skyClass: 'sunset-4',
                        treeCount: 20,
                        bushCount: 8,
                        flowerCount: 8,
                        mushroomCount: 4
                    },
                    {
                        position: 800,
                        text: "You're so close Ife mi, the gurgling of the lake tells you you're in the right place.",
                        sound: 'lake',
                        skyClass: 'dusk',
                        treeCount: 22,
                        bushCount: 10,
                        flowerCount: 10,
                        mushroomCount: 6
                    },
                    {
                        position: 950,
                        text: "You've arrived at the most beautiful moonlit lake! The perfect spot for a birthday surprise. Click once more...",
                        sound: 'lake',
                        skyClass: 'night-sky',
                        treeCount: 25,
                        bushCount: 12,
                        flowerCount: 12,
                        mushroomCount: 8,
                        final: true
                    }
                ];
                
                this.init();
            }
            
            init() {
                this.createInitialTrees();
                this.createStars();
                this.createBushes();
                this.createFlowers();
                this.createMushrooms();
                
                // Initialize audio on first button click
                this.nextButton.addEventListener('click', () => {
                    if (!this.audioContext) {
                        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    this.nextStep();
                });
                
                this.showBlurb(this.steps[0].text);
            }
            
            createInitialTrees() {
                const treesContainer = document.getElementById('trees');
                treesContainer.innerHTML = '';
                
                for (let i = 0; i < 8; i++) {
                    const tree = document.createElement('div');
                    tree.className = 'tree';
                    tree.style.left = Math.random() * 100 + '%';
                    tree.style.transform = `scale(${0.5 + Math.random() * 0.8})`;
                    treesContainer.appendChild(tree);
                }
            }
            
            updateForestDensity(step) {
                this.updateTrees(step.treeCount);
                this.updateBushes(step.bushCount);
                this.updateFlowers(step.flowerCount);
                this.updateMushrooms(step.mushroomCount);
            }
            
            updateTrees(count) {
                const treesContainer = document.getElementById('trees');
                const currentTrees = treesContainer.children.length;
                
                if (count > currentTrees) {
                    for (let i = currentTrees; i < count; i++) {
                        const tree = document.createElement('div');
                        const size = Math.random();
                        if (size > 0.7) {
                            tree.className = 'tree large';
                        } else if (size > 0.4) {
                            tree.className = 'tree medium';
                        } else {
                            tree.className = 'tree';
                        }
                        tree.style.left = Math.random() * 100 + '%';
                        tree.style.transform = `scale(${0.6 + Math.random() * 0.9})`;
                        tree.style.zIndex = Math.floor(Math.random() * 5);
                        treesContainer.appendChild(tree);
                    }
                }
            }
            
            createBushes() {
                const bushesContainer = this.bushes;
                for (let i = 0; i < 12; i++) {
                    const bush = document.createElement('div');
                    bush.className = 'bush';
                    bush.style.left = Math.random() * 100 + '%';
                    bush.style.transform = `scale(${0.7 + Math.random() * 0.6})`;
                    bushesContainer.appendChild(bush);
                }
            }
            
            updateBushes(count) {
                const bushes = this.bushes.children;
                for (let i = 0; i < Math.min(count, bushes.length); i++) {
                    bushes[i].style.opacity = '1';
                }
            }
            
            createFlowers() {
                const flowersContainer = this.flowers;
                const colors = ['#FF69B4', '#FF1493', '#FFB6C1', '#FFA500', '#FFFF00', '#9370DB'];
                for (let i = 0; i < 12; i++) {
                    const flower = document.createElement('div');
                    flower.className = 'flower';
                    flower.style.left = Math.random() * 100 + '%';
                    flower.style.background = colors[Math.floor(Math.random() * colors.length)];
                    flower.style.transform = `scale(${0.8 + Math.random() * 0.4})`;
                    flowersContainer.appendChild(flower);
                }
            }
            
            updateFlowers(count) {
                const flowers = this.flowers.children;
                for (let i = 0; i < Math.min(count, flowers.length); i++) {
                    flowers[i].style.opacity = '1';
                }
            }
            
            createMushrooms() {
                const mushroomsContainer = this.mushrooms;
                for (let i = 0; i < 8; i++) {
                    const mushroom = document.createElement('div');
                    mushroom.className = 'mushroom';
                    mushroom.style.left = Math.random() * 100 + '%';
                    mushroom.style.transform = `scale(${0.6 + Math.random() * 0.5})`;
                    mushroomsContainer.appendChild(mushroom);
                }
            }
            
            updateMushrooms(count) {
                const mushrooms = this.mushrooms.children;
                for (let i = 0; i < Math.min(count, mushrooms.length); i++) {
                    mushrooms[i].style.opacity = '1';
                }
            }
            
            createStars() {
                const starsContainer = document.getElementById('stars');
                for (let i = 0; i < 50; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 60 + '%';
                    star.style.animationDelay = Math.random() * 2 + 's';
                    starsContainer.appendChild(star);
                }
            }
            
            nextStep() {
                if (this.currentStep >= this.steps.length) return;
                
                this.nextButton.disabled = true;
                
                const step = this.steps[this.currentStep];
                
                // Update sky and sun
                if (step.skyClass) {
                    this.background.classList.add(step.skyClass);
                    if (step.skyClass.includes('sunset')) {
                        this.sun.classList.add('setting');
                    } else if (step.skyClass === 'dusk' || step.skyClass === 'night-sky') {
                        this.sun.classList.add('hidden');
                    }
                }
                
                // Move character
                this.character.style.left = step.position + 'px';
                
                // Update forest density
                this.updateForestDensity(step);
                
                // Play sound
                this.playSound(step.sound);
                
                // Show blurb after movement
                setTimeout(() => {
                    this.showBlurb(step.text);
                }, 500);
                
                // Check if this is the final step
                if (step.final) {
                    setTimeout(() => {
                        this.showNightScene();
                    }, 1000);
                    
                    setTimeout(() => {
                        this.showBirthdayCard();
                    }, 3000);
                }
                
                // Re-enable button for next step
                setTimeout(() => {
                    this.nextButton.disabled = false;
                    this.currentStep++;
                }, 2000);
            }
            
            showBlurb(text) {
                this.blurb.classList.remove('show');
                setTimeout(() => {
                    this.blurb.textContent = text;
                    this.blurb.classList.add('show');
                }, 200);
            }
            
            showNightScene() {
                this.background.classList.add('night-sky');
                this.stars.classList.add('visible');
                this.moon.classList.add('visible');
                this.lake.classList.add('visible');
            }
            
            showBirthdayCard() {
                this.birthdayCard.classList.add('show');
            }
            
            showSoundIndicator() {
                this.soundIndicator.classList.add('show');
                setTimeout(() => {
                    this.soundIndicator.classList.remove('show');
                }, 2000);
            }
            
            async playSound(type) {
                try {
                    // Show sound indicator
                    this.showSoundIndicator();
                    
                    // Resume context if suspended
                    if (this.audioContext && this.audioContext.state === 'suspended') {
                        await this.audioContext.resume();
                    }
                    
                    if (!this.audioContext) {
                        console.log('Audio context not initialized');
                        return;
                    }
                    
                    switch(type) {
                        case 'tree':
                            this.playTreeSound();
                            break;
                        case 'cricket':
                            this.playCricketSound();
                            break;
                        case 'frog':
                            this.playFrogSound();
                            break;
                        case 'wind':
                            this.playWindSound();
                            break;
                        case 'lake':
                            this.playLakeSound();
                            break;
                    }
                } catch (error) {
                    console.log('Audio could not be played:', error);
                }
            }
            
            playTreeSound() {
                const ctx = this.audioContext;
                const oscillator = ctx.createOscillator();
                const gainNode = ctx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                oscillator.frequency.setValueAtTime(200, ctx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(150, ctx.currentTime + 1);
                
                gainNode.gain.setValueAtTime(0, ctx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.1, ctx.currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 1);
                
                oscillator.type = 'sawtooth';
                oscillator.start(ctx.currentTime);
                oscillator.stop(ctx.currentTime + 1);
            }
            
            playCricketSound() {
                const ctx = this.audioContext;
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        const oscillator = ctx.createOscillator();
                        const gainNode = ctx.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(ctx.destination);
                        
                        oscillator.frequency.setValueAtTime(3000 + Math.random() * 1000, ctx.currentTime);
                        oscillator.type = 'square';
                        
                        gainNode.gain.setValueAtTime(0, ctx.currentTime);
                        gainNode.gain.linearRampToValueAtTime(0.05, ctx.currentTime + 0.01);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.1);
                        
                        oscillator.start(ctx.currentTime);
                        oscillator.stop(ctx.currentTime + 0.1);
                    }, i * 200);
                }
            }
            
            playFrogSound() {
                const ctx = this.audioContext;
                const oscillator = ctx.createOscillator();
                const gainNode = ctx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                oscillator.frequency.setValueAtTime(100, ctx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(80, ctx.currentTime + 0.2);
                oscillator.frequency.linearRampToValueAtTime(100, ctx.currentTime + 0.4);
                
                gainNode.gain.setValueAtTime(0, ctx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
                
                oscillator.type = 'sine';
                oscillator.start(ctx.currentTime);
                oscillator.stop(ctx.currentTime + 0.4);
            }
            
            playWindSound() {
                const ctx = this.audioContext;
                const bufferSize = ctx.sampleRate * 2;
                const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
                const data = buffer.getChannelData(0);
                
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.1;
                }
                
                const source = ctx.createBufferSource();
                const filter = ctx.createBiquadFilter();
                const gainNode = ctx.createGain();
                
                source.buffer = buffer;
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(500, ctx.currentTime);
                
                source.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                gainNode.gain.setValueAtTime(0, ctx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.2, ctx.currentTime + 0.5);
                gainNode.gain.linearRampToValueAtTime(0, ctx.currentTime + 2);
                
                source.start(ctx.currentTime);
                source.stop(ctx.currentTime + 2);
            }
            
            playLakeSound() {
                const ctx = this.audioContext;
                const oscillator1 = ctx.createOscillator();
                const oscillator2 = ctx.createOscillator();
                const gainNode = ctx.createGain();
                
                oscillator1.connect(gainNode);
                oscillator2.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                oscillator1.frequency.setValueAtTime(220, ctx.currentTime);
                oscillator1.frequency.linearRampToValueAtTime(200, ctx.currentTime + 2);
                
                oscillator2.frequency.setValueAtTime(110, ctx.currentTime);
                oscillator2.frequency.linearRampToValueAtTime(100, ctx.currentTime + 2);
                
                gainNode.gain.setValueAtTime(0, ctx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.1, ctx.currentTime + 0.2);
                gainNode.gain.linearRampToValueAtTime(0.05, ctx.currentTime + 1.8);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 2);
                
                oscillator1.type = 'sine';
                oscillator2.type = 'sine';
                
                oscillator1.start(ctx.currentTime);
                oscillator2.start(ctx.currentTime);
                oscillator1.stop(ctx.currentTime + 2);
                oscillator2.stop(ctx.currentTime + 2);
            }
        }
        
        // Start the game when page loads
        window.addEventListener('load', () => {
            new PixelHike();
        });
    </script>
</body>
</html>
